# Linux系统的VIM工具使用

早期的Unix都是使用vi作为系统默认的编辑器。也许你会问，vi与Vim有什么区别？其实Vim是vi的升级版。很多Linux系统管理员都习惯用vi，因为他们接触Linux时用的就是vi，Vim到后来才比较流行

vi和Vim的最大区别就是编辑一个文本时vi不会显示颜色，而Vim会显示颜色。显示颜色更便于用户进行编辑，但其他功能没有太大的区别

Vim有3种模式：一般模式、编辑模式和命令模式，这需要我们牢记。

## 1 一般模式

当我们使用命令vim filename编辑文件时，默认进入该文件的一般模式。在这个模式下，你可以做的操作有：上下移动光标、删除某个字符、删除某行以及复制或粘贴一行或者多行。

![image-20200307150018768](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84VIM%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8.assets/image-20200307150018768.png)

![image-20200307150738566](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84VIM%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8.assets/image-20200307150738566.png)

这个就是进入了VIM的编辑系统, 但是这样的话咱们还是无法编辑文件



移动光标的方式有很多, 一般常用的有如下这些

![image-20200307160940319](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84VIM%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8.assets/image-20200307160940319.png)

在一般模式下，我们还可以实现字符或字符串的复制、删除、粘贴等操作

![image-20200307163214343](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84VIM%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8.assets/image-20200307163214343.png)

## 2 编辑模式

在输入上面的指令之后, 我们还不能直接编辑文件, 只能移动光标, 如果想要进入编辑模式, 我们还需要输入一下任意指令, 这个指令只需要按下键盘对应的键即可

![image-20200307151420800](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84VIM%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8.assets/image-20200307151420800.png)

![image-20200307151446955](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84VIM%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8.assets/image-20200307151446955.png)

在输入上面的任意指令之后, VIM的界面就会出现下面这个INSERT的标记, 这就意味着咱们可以编辑文件了

当我们输入完成之后, 想要保存数据或是退出界面, 则需要先按下 Esc按钮(  这样就退回了一般模式),然后在输入指令

![image-20200307152500499](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84VIM%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8.assets/image-20200307152500499.png)

<center>按下Ecs按键后, 就会显示一般模式的界面</center>

## 3 命令模式

当我们回退到一般模式后, 输入:或者/即可进入命令模式。在该模式下，我们可以搜索某个字符或者字符串，也可以实现保存、替换、退出、显示行号等操作

![image-20200307152724861](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84VIM%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8.assets/image-20200307152724861.png)

- /word: 在光标之后查找一个字符串word，按n向后继续搜索

  ![image-20200307153229401](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84VIM%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8.assets/image-20200307153229401.png)

- ?word: 在光标之前查找一个字符串word，按n向前继续搜索
- :n1,n2s/word1/word2/g   在n1和n2行之间查找word1并替换为word2，不加g则只替换每行的第一个word1
- :1,$s/word1/word2/g   将文档中所有的word1替换为word2，不加g则只替换每行的第一个word1

命令模式还有其他一些更重要的功能, 比如保存文件, 退出VIM系统等

1. :w , 保存文件

2. :q , 退出VIM ( 注意如果我们修改了文件, 那么退出前一定要先保存才可以, 不然的话VIM就会提示, 你没有保存, 不允许退出, 我们可以使用组合指令 :wq, 这个代表咱们 )

   ![image-20200307160126618](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84VIM%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8.assets/image-20200307160126618.png)

3. :w!, 强制保存, 在root用户下，即使文本只读也可以完成保存

4. :q!, 强制退出，所有改动不生效

5. :set nu  显示行号

   ![image-20200307160440945](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84VIM%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8.assets/image-20200307160440945.png)

6. :set nonu  不显示行号



















