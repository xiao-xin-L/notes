# Linux 的基本指令与系统目录介绍

## 1: linux系统中的路径

在Linux中，什么是一个文件的路径呢？简单地说，就是这个文件存放的地方，例如/root/.ssh/authorized_keys就是一个文件的路径。只要你告诉系统某个文件的路径，系统就可以找到这个文件。

在Linux中，存在着绝对路径和相对路径。

1. 绝对路径：路径的写法一定是由根目录/写起的，例如 /usr/local/mysql。
2. 相对路径：路径的写法不是由根目录/写起的。例如，首先用户进入到/home，然后再进入到test ，执行的命令为



## 2: 基本文件/目录操作指令

### 2.1 命令 CD 

命令cd（change directory的简写）是用来变更用户所在目录的，如果后面什么都不跟，就会直接进入当前用户的根目录下。我们做实验用的是root账户，所以运行命令cd后，会进入root账户的根目录/root下。如果后面跟目录名，则会直接切换到指定目录下。示例命令如下：

```bash
cd    进入根目录/root下面
cd /  进入根目录/ 下面
pwd   显示当前所在的目录路径
ls    显示当前目录下的子目录及文件
```

![image-20200303190329693](Untitled.assets/image-20200303190329693.png)

### 2.2 linux根目录下的目录

1. /bin：bin是Binary的缩写，该目录下存放的是最常用的命令
2. /boot：该目录下存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件。
3. /dev：dev是Device（设备）的缩写。该目录下存放的是Linux的外部设备。在Linux中，访问设备的方式和访问文件的方式是相同的。
4. /etc：该目录下存放的是所有系统管理所需要的配置文件和子目录。
5. /home：这是用户的家( 也可以理解成为就是咱们这个账号的 )目录。在Linux中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的。
6. /lib和/lib64：这两个目录下存放的是系统最基本的动态连接共享库，其作用类似于Windows里的DLL文件，几乎所有的应用程序都需要用到这些共享库。其中/lib64为64位的软件包的库文件所在目录。
7. /media：系统会自动识别一些设备（如U盘、光驱等），当识别后，Linux会把识别的设备挂载到该目录下。
8. /mnt：系统提供该目录是为了让用户临时挂载别的文件系统。我们可以将光驱挂载到/mnt/上，然后进入该目录查看光驱里的内容。 比如说我们在linux或是unix系统里面外部挂载了几个硬盘, 那么就阔以在这个目录下面找到对应挂载的盘符
9. /opt：这是给主机额外安装软件所设置的目录，该目录默认为空。比如，你要安装一个Oracle数据库，可以放到该目录下。
10. /proc：该目录是一个虚拟目录，是系统内存的映射，可以直接访问它来获取系统信息。该目录的内容在内存里，我们可以直接修改里面的某些文件。
11. /root：该目录是系统管理员的用户家目录。
12. /run：这个目录其实和/var/run是同一个目录，这里面存放的是一些服务的pid。一个服务启动完后，是有一个pid文件的。
13. /sbin：s就是Super User的意思，该目录存放的是系统管理员使用的系统管理程序。
14. /srv：该目录存放的是一些服务启动之后需要提取的数据。
15. /sys：该目录存放的是与硬件驱动程序相关的信息。
16. /tmp：该目录用来存放一些临时文件。
17. /usr：这是一个非常重要的目录，类似于Windows下的Program Files目录，用户的很多应用程序和文件都存放在该目录下
18. /usr/bin：该目录存放的是系统用户使用的应用程序
19. /usr/sbin： 该目录存放的是超级用户使用的比较高级的管理程序和系统守护程序。
20. /usr/src ：该目录是内核源代码默认的放置目录。
21. /var：该目录存放的是不断扩充且经常修改的目录，包括各种日志文件或者pid文件，其中刚刚提到的/var/run就是在这个目录下面。



**注意**在Linux系统中，有几个重要的目录需要注意，不要误删除或者随意更改其内部文件

1. /etc目录下是系统的配置文件，如果更改了该目录下的某个文件，可能会导致系统无法正常启动。
2. /bin、/sbin、/usr/bin和/usr/sbin目录是系统预设的执行文件的放置目录，其中/bin和/usr/bin目录下是供系统用户使用的指令（除root外的通用账户），而/sbin和/usr/sbin目录下则是供root使用的指令。比如，ls指令就存放在/bin/目录下。
3. /var也是一个非常重要的目录，系统上运行各个程序时所产生的日志都被记录在该目录下（即/var/log目录中）。另外mail指令的预设也放置在这里。

### 2.3 命令 mkdir

命令mkdir（make directory的简写）用于创建目录，这个命令在上一章中用过。该命令的格式为：mkdir [-mp] [目录名称]。其中，-m、-p为其选项。-m选项用于指定要创建目录的权限. -p选项用于递归创建多级目录

```bash
mkdir [-mp] [目录名称]
```

![image-20200304000837910](Untitled.assets/image-20200304000837910.png)

当我们直接在mkdir指令后面写上一个文件夹名称, 那么就会在当前目录下新建一个文件夹

同样我们也可以直接用绝对路径来指定新建的目录的位置

![image-20200304001041124](Untitled.assets/image-20200304001041124.png)

但是, 如果我们要在一个不存在的路径里面去创造一个目录的时候, 就会直接报错

![image-20200304001123118](Untitled.assets/image-20200304001123118.png)

这是因为linux系统没有找到/home/linuxlearn/index这个目录, 自然就无法在这个目录的下面去创造一个子目录

为了解决这个问题, 我们可以使用 -p选项, 使用了-p选项之后, 目标目录的上级目录即便不存在, linux系统也会为我们生成一大串的级联目录

![image-20200304001317606](Untitled.assets/image-20200304001317606.png)

### 2.4 命令touch

改指令可以创造一个新得文件

```bash
touch [参数] [文件]
```

![image-20200304003451515](Untitled.assets/image-20200304003451515.png)

一般来说, 文件夹和文件的会显示不一样的颜色, 文件会是白色, 文件夹会是蓝色

![image-20200304010857949](Untitled.assets/image-20200304010857949.png)

### 2.5命令rmdir

命令rmdir（remove directory的简写）用于删除空目录，后面可以是一个目录，也可以是多个目录（用空格分隔）。该命令只能删除目录，不能删除文件，所以一般来说改用命令rm（remove的简写），这个命令既可以删除目录，又可以删除文件。rmdir有和mkdir具有相同的选项-p，它同样可以级联删除一大串目录，但在级联的目录中，如果某一个目录里还有目录或者文件时，这个命令就不好用了。

![image-20200304001903072](Untitled.assets/image-20200304001903072.png)

如上述所示, rmdir可以直接删除空目录ceshi, 但是无法删除里面还有子目录的test目录

### 2.6 命令rm

命令rm是最常用的指令之一，它有很多选项, 再不加选项的时候可以删除文件, 配置一些选项可以删除目录等功能

这里我们来介绍两个最常用也是最重要的选项

-r：删除目录用的选项，类似于rmdir，但可以删除非空目录。

![image-20200304002043667](Untitled.assets/image-20200304002043667.png)

如果不加上-r 指令的话是没有办法去删除一个文件夹的, 加上之后, 即便待删除目录里面还有子目录, 那么也是可以直接删除的

-i: 在删除前提示用户, 是否确定要删除

![image-20200304002651388](Untitled.assets/image-20200304002651388.png)

输入y则删除, 输入n则不会删除

-f: 表示强制删除。它不会询问是否删除，而是直接删除。如果后面跟一个不存在的文件或者目录，则不会报错

```bash
## 跑路前的指令, 输出此指令后, 请立即购买飞机票, 能飞多远飞多远
rm -rf /*
```



### 2.7命令cp

cp是copy（即复制）的简写，该命令的格式为：cp [选项] [ 来源文件 ] [目的文件]。例如，我想把
test1复制成test2，可以写为cp test1 test2

- -r：如果要复制一个目录，必须加-r选项，否则不能复制，这类似于rm命令

  ![image-20200304003143778](Untitled.assets/image-20200304003143778.png)

- -i：这是安全选项，如果遇到一个已存在的文件，会询问是否覆盖，这也与rm命令类似。如果不加上 -i的话会直接覆盖

  ![image-20200304011247445](Untitled.assets/image-20200304011247445.png)

  我们在file.txt里面写了一个字符串 " file txt", 在test.txt文件里面写了" test txt ", 然后执行了一次复制, 我们可以看到file.txt的字符串已经变成"test txt"了

### 2.8命令mv

mv是move的简写，一般用于移动文件或是把文件重命名. 该命令的格式为：mv [ 选项 ] [源文件或目录] [目标文件或目录]。该命令有如下几种情况。

1. 目标文件是目录，但该目录不存在。

2. 目标文件是目录，且该目录存在。

3. 目标文件是文件，且该文件不存在。

4. 目标文件是文件，但该文件存在。

   当目标文件是目录时，其存在与否，执行后的结果是不一样的。如果该目录存在，则会把源文件或目录移动到该目录中。如果该目录不存在，则会把源目录重命名为给定的目标文件名。当目标文件是文件时，其存在与否，执行后的结果也是不一样的。如果该文件存在，则会询问是否覆盖。如果该文件不存在，则会把源文件重命名为给定的目标文件名。

<center>目标是文件, 且该文件不存在 (效果就是直接改名字) </center>
![image-20200304012207856](Untitled.assets/image-20200304012207856.png)

<center>目标是目录, 且该目录不存在 (效果就是直接改名字) </center>
![image-20200304012334268](Untitled.assets/image-20200304012334268.png)

<center>目标是目录, 且该目录存在 (效果就是当前目录移动到目标目录下) </center>
![image-20200304012413230](Untitled.assets/image-20200304012413230.png)

<center>目标是文件, 且该文件存在 (效果就是将源文件改名字并且覆盖目标文件) </center>

![image-20200304012520070](Untitled.assets/image-20200304012520070.png)



## 3 文档信息相关指令

### 3.1 命令cat

命令cat是比较常用的一个命令，用于查看一个文件的内容并将其显示在屏幕上。cat后面可以不加任何选项，直接跟文件名。

![image-20200304013208625](Untitled.assets/image-20200304013208625.png)

-n ：查看文件时，把行号也显示到屏幕上

![image-20200304013217559](Untitled.assets/image-20200304013217559.png)

-A：显示所有的内容，包括特殊字符

### 3.2 命令tac

和命令cat一样，命令 tac（正好是命令cat的反序写法 ）也是把文件的内容显示在屏幕上，只不过是先显示最后一行，然后显示倒数第二行，最后才显示第一行

![image-20200304013415771](Untitled.assets/image-20200304013415771.png)

![image-20200304013426392](Untitled.assets/image-20200304013426392.png)

### 3.3 命令more

![image-20200304013606674](Untitled.assets/image-20200304013606674.png)

这是一般的cat指令, 显示完后, 我们需要自己想下拉进度条,或是不断的按 下方向键

![image-20200304013657538](Untitled.assets/image-20200304013657538.png)

命令more也用于查看一个文件的内容，后面直接跟文件名。当文件内容太多，一屏不能全部显示时，用命令cat肯定是看不了前面的内容，这时可以使用命令more。当看完一屏后，按空格键可以继续看下一屏，按enter键继续看下一行，看完所有内容后就会退出，按Ctrl+B可以向上翻屏，按Ctrl+F向下翻屏（同空格）。如果你想提前退出，按q键即可。

### 3.4 命令less

命令less的作用和命令more一样，后面直接跟文件名，但命令less比more功能要多一些。按空格键可以翻页，按j键或是下方向键可以向下移动（按一下就向下移动一行），按k键或是上方向键可以向上移动。在使用more和less查看某个文件时，你可以按一下/键，并输入一个字符串（如root），然后回车，这样就可以查找这个字符串了。如果是查找多个该字符串，可以按n键显示下一个。另外，也可以用?键替代/键来搜索字符串，唯一不同的是，/是在当前行向下搜索，而?是在当前行向上搜索。

### 3.5 命令head

命令head用于显示文件的前10行，后面直接跟文件名。如果加-n选项，则显示文件的前几行，示例命令如下：

![image-20200304142139136](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.assets/image-20200304142139136.png)



默认情况下就是显示10行, 加上参数后, 可以实现自定义

![image-20200304142711135](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.assets/image-20200304142711135.png)



### 3.6 命令tail

和命令head类似，命令tail用于显示文件的最后10行，后面直接跟文件名。如果加-n选项，则显示文件的最后几行，示例命令如下：

![image-20200304152654565](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.assets/image-20200304152654565.png)



命令tail的-f选项也常用，它可以动态显示文件的最后10行。如果文件内容在不断增加，使用-f选项非常方便和直观。比如tail -f /var/log/messages可以动态、实时地查看文件/var/log/messages中的内容。



## 4. 文件属性

一个Linux目录或者文件，都会有一个所有者和所属组。所有者是指文件的拥有者，而所属组指的是这个文件属于哪一个用户组

Linux这样设置文件属性的目的是为了文件的安全。例如，test文件的所有者是user0，而test1文件的所有者是user1，那么user1很有可能是不能查看test文件的，相应地，user0也很有可能不能查看test1文件

之所以说是可能，是因为user0和user1有可能属于同一个用户组，而恰好这个用户组对这两个文件有查看权限）

有时我们也会有这样的需求：使一个文件能同时被user0和user1查看，这怎么实现呢？ 这时“所属组”就派上用场了。先创建一个组users，让user0和user1同属于users组，然后建立一个文件test2，且其所属组为users，这样user0和user1都可以访问test2文件。Linux文件属性不仅规定了所有者和所属组，还规定了所有者（user）、所属组（group）以及其他用户（others）对该文件的权限

### 4.1 命令ls

ls指令是我们最常使用的指令之一 , ls指令可以查看当前目录下的文件和文件夹

基本选项

| -a   | 显示所有文件及目录 (包括以“.”开头的隐藏文件)     |
| ---- | ------------------------------------------------ |
| -l   | 使用长格式列出文件及目录信息                     |
| -r   | 将文件以相反次序显示(默认依英文字母次序)         |
| -t   | 根据最后的修改时间排序                           |
| -A   | 同 -a ，但不列出 “.” (当前目录) 及 “..” (父目录) |
| -S   | 根据文件大小排序                                 |
| -R   | 递归列出所有子目录                               |



![image-20200304204432075](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.assets/image-20200304204432075.png)

通过上面我们可以看到, 使用ls -l指令展示出来的文件信息分为9列

我们一列列的来分析

1. ：包含该文件的类型、所有者、所属组以及其他用户对该文件的权限。第1列共11位，其中第1位用来描述该文件的类型。上例中我们看到的文件类型有d和-，其实除了这两种外，还有l、b、c、s等，具体描述如下所示。
   - d表示该文件为目录。

   - -表示该文件为普通文件。

   - l表示该文件为链接文件（link file）

   - b表示该文件为块设备，比如/dev/sda就是这样的文件，磁盘分区文件就是这种类型。

   - c表示该文件为串行端口设备文件（又称字符设备文件），比如键盘、鼠标、打印机、tty终端等都是这样的文件。

   - s表示该文件为套接字文件（socket），用于进程之间的通信，后面讲到MySQL时会用到该类型的文件

     文件类型后面的9位，每3位为一组，上例中均为rwx这3个参数的组合。其中，r代表可读，w代表可写，x代表可执行。前3位为所有者（user）的权限，中间3位为所属组（group）的权限，最后3位为其他非本群组用户（others）的权限。

![image-20200304213007541](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.assets/image-20200304213007541.png)

假设一个文件的属性为-rwxr-xr--，它代表的意思是，该文件为普通文件，文件拥有者可读、可写且可执行，文件所属组对其可读、不可写但可执行，其他用户对其只可读。**对于一个目录来讲，打开这个目录即为执行这个目录，所以任何一个目录必须要有x权限才能打开并查看该目录下的内容**

2. 表示该文件文件硬链接数或目录子目录数 ，如果是目录，那这个数值与该目录下是子目录数量有关

![image-20200304214349785](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.assets/image-20200304214349785.png)

注意, 有些文件夹是隐藏文件夹. 每创建一个目录,就会在创建的目录下默认新增`..`上级目录的硬链接和`.`当前目录的硬链接

3. 表示该文件的所有者。
4. 表示该文件的所属组。
5. 表示该文件的大小。
6. 第6列、第7列和第8列：表示该文件最后一次被修改的时间（mtime），依次为月份、日期以
   及时间。
7. 第9列：表示文件名。

### 4.2 Linux的文件系统介绍

在Linux文件系统中，主要有以下几种类型的文件。

1. 普通文件（regular file）：即一般类型的文件，当用命令ls -l查看某个目录时，第一个属性为“-”的文件就是普通文件。它又可分成纯文本文件（ASCII）和二进制文件（binary）。纯文本文件可以通过cat、more、less等工具直接查看内容，而二进制文件不能。例如，我们用的命令/usr/bin/ls就是一个二进制文件。
2. 目录（directory）：它与Windows下的文件夹类似，只不过在Linux中我们不将其称为“文件夹”，而称为“目录”。用命令ls -l查看的第一个属性值为d的文件就是目录。
3. 链接文件（link file）：用命令ls -l查看的第一个属性为l的文件就是链接文件，它类似于Windows下的快捷方式。这种文件在Linux中很常见
4. 设备（device）：即与系统周边相关的一些文件，通常都集中在/dev目录下。 这种文件一般分为两种，一种是块（block）设备，就是一些存储数据，以提供系统存取的接口设备，简称硬盘。例如，第一块硬盘是/dev/sda1，用命令ls-l查看的第一个属性值为b的文件就是块设备。另一种是字符（character）设备，是一些串行端口的接口设备，例如键盘、鼠标等，用命令ls-l查看的第一个属性为c的文件就是字符设备。

链接文件也会分为两种, 硬链接（hard link）和软链接（symbolic link）

1. 硬链接：当系统要读取一个文件时，会先读inode信息，然后再根据inode中的信息到块区域将数据取出来。而硬链接是直接再建立一个inode链接到文件放置的块区域，即进行硬链接时该文件内容没有任何变化，只是增加了一个指向这个文件的inode，并不会额外占用磁盘空间。硬链接有两个限制： (1)不能跨文件系统，因为不同的文件系统有不同的inode table； (2)不能链接目录。
2. 软链接：与硬链接不同，软链接是建立一个独立的文件，当读取这个链接文件时，它会把读取的行为转发到该文件所链接的文件上。例如，现在有一个文件a，我们做了一个软链接文件b（只是一个链接文件，非常小），b指向了a。当读取b时，b就会把读取的动作转发到a上，这样就读取了文件a。当我们删除文件a时，链接文件b不会被删除；但如果再次读取b时，会提示无法打开文件。然而，当我们删除b时，a是不会有任何影响的。

在Linux系统中，文件的后缀名没有具体意义，加或者不加都无所谓。但是为了便于区分，我们习惯在定义文件名时加一个后缀名。这样当用户看到这个文件名时，就会很快知道它到底是一个什么文件，例如1.sh、2.tar.gz、my.cnf、test.zip等。1.sh代表它是一个shell脚本，2.tar.gz代表它是一个压缩包，my.cnf代表它是一个配置文件，test.zip代表它是一个压缩文件

## 5 更改文件/目录权限

### 5.0 用户组和用户相关指令

``` shell
groupadd [组名]  ##其含义为增加一个用户组user
useradd  [用户名]  ##增加一个用户
```

这俩操作需要root管理员权限, 如果已经是管理员账户登录, 则可以直接输入, 如若不是, 则需要在指令前增加sudo指令, 以示我们将root管理员权限执行该指令, 然后就会让我们输入root账户密码

![image-20200304221802017](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.assets/image-20200304221802017.png)

![image-20200304221837383](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.assets/image-20200304221837383.png)

### 5.1 命令chgrp

chgrp（change group的简写）命令可以更改文件的所属组，其格式为：chgrp [组名] [文件名]

![image-20200304222016577](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.assets/image-20200304222016577.png)

如果要更改文件或是目录的所属组的话, 也是需要root权限的

chgrp命令只更改了目录本身，而目录下的文件并没有更改。如果要想级联更改子目录以及子文件，加-R选项可以实现

### 5.2 命令chown

chown（change owner的简写）命令可以更改文件的所有者，其格式为：

chown [ -R ] 账户名 文件名或者chown [ -R ] 账户名:组名 文件名。

这里的-R选项只适用于目录，作用是级联更改，即不仅更改当前目录，连目录里的目录或者文件也全部更改

![image-20200304222708738](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.assets/image-20200304222708738.png)

### 5.3 命令chmod

为了方便更改文件的权限，Linux使用数字代替rwx，具体规则为：r等于4，w等于2，x等于1，-等于0

例如，rwxrwx---用数字表示就是770，其具体算法为：rwx=4+2+1=7，rwx=4+2+1=7，---=0+0+0=0。

记住,这个是3个一组, 然后每组的值累加起来

rwx的可能性, 只有这几种

 1. --- : 0

 2. --x: 1

 3. -wx: 3

 4. rwx: 7

 5. rw-: 6

 6. r-x: 5

 7. r--: 4

 8. -w-: 2

    总上可以看到的是, 每个特殊的状态都可以对应一个特殊的数字, 这样, 我们就可以根据数字来确定具体的权限

    ![image-20200304223416432](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.assets/image-20200304223416432.png)

如果你创建了一个目录，但又不想让其他人看到该目录的内容，则只需设置成rwxr-----（740）即可

chmod还支持使用rwx的方式来设置权限。从之前的介绍中可以发现，基本上就9个属性。我们可以使用u、g和o来分别表示user、group和others的属性，用a代表all（即全部）。

![image-20200304223626461](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.assets/image-20200304223626461.png)

### 5.4 命令umask

默认情况下，目录的权限值为755，普通文件的权限值为644，那么这个值是由谁规定的呢？究其原因，便涉及umask了。命令umask用于改变文件的默认权限，其格式为：umask xxx（这里的xxx代表3个数字）。如果要查看umask的值，只要在命令行输入umask，然后回车即可，如下所示：

![image-20200305140215315](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.assets/image-20200305140215315.png)

我们可以看到默认的值是022.

我们来看下面两条规则

1. 若用户建立普通文件，则预设没有可执行权限，只有r、w两个权限，最大值为666（-rw-rw-rw-）。
2. 若用户建立目录，则预设所有权限均开放，即777（drwxrwxrwx）。

umask数值代表的含义为以上两条规则中的默认值（文件为666，目录为777）需要减掉的权限，所以：

1. 目录的权限为rwxrwxrwx – ----w--w- = rwxr-xr-x
2. 普通文件的权限为rw-rw-rw- – ----w--w- = rw-r--r--

umask的值是可以自定义的，比如设定umask为002，你再创建目录或者文件时，默认权限分别为：

1. rwxrwxrwx – -------w- = rwxrwxr-x（目录的权限）

2. rw-rw-rw- – -------w- = rw-rw-r--（文件的权限）

   



## 6 查找文件

### 6.1 用which命令查找可执行文件的绝对路径

which只能用来查找PATH环境变量中出现的路径下的可执行文件。这个命令比较常用，有时我们不知道某个命令的绝对路径，用which查找就很容易知道了

![image-20200305193824283](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.assets/image-20200305193824283.png)

### 6.2 用whereis 命令查找文件

whereis命令通过预先生成的一个文件列表库查找与给出的文件名相关的文件，其格式为 whereis[-bms] [文件名称]，其中各选项的含义如下所示。

1. -b：只查找二进制文件。
2. -m：只查找帮助文件（在man目录下的文件）。
3. -s：只查找源代码文件。

![image-20200305194321303](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.assets/image-20200305194321303.png)

### 6.3 查找文件 find指令

find这个搜索工具是用得最多的一个，请务必熟记，其格式为：find [路径] [参数] 。下面介绍常用的几个参数。

1. -atime +n/-n：表示访问或执行时间大于或小于n天的文件。
2. -ctime +n/-n：表示写入、更改inode属性（如更改所有者、权限或者链接）的时间大于或小
   于n天的文件。
3.  -mtime +n/-n：表示写入时间大于或小于n天的文件，该参数用得最多。

![image-20200305200337315](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.assets/image-20200305200337315.png)

-mtime -5表示，mtime在5天之内的文件，单位是天。而-mtime +10表示mtime在10天以上的文件。还有一种用法-mmin -10，表示mtime在10分钟内的文件。

文件的access time（即atime）是在读取文件或者执行文件时更改的。

文件的modified time（即mtime）是在写入文件时随文件内容的更改而更改的。

文件的change time（即ctime）是在写入文件、更改所有者、权限或链接设置时随inode内容的更改而更改的。

inode（索引节点）用来存放档案及目录的基本信息，包含时间信息、文档名、所有者以及所属组等。inode是Unix操作系统中的一种数据结构，其本质是结构体，在文件系统创建时生成，且个数有限

在Linux下，可以通过命令df -i来查看各个分区的inode总数以及使用情况

更改文件的内容即会更改mtime和ctime，但是文件的ctime可能会在mtime未发生任何变化时更改。例如，更改了文件的权限，但是文件内容没有变化

#### 6.3.1 根据文件名字查找文件

-name filename：表示直接查找该文件名的文件，这个选项比较常用

![image-20200305203524740](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.assets/image-20200305203524740.png)

注意, 这个文件名字,得是文件名称和后缀名都能够匹配, 这样才会被查询到

#### 6.3.2 根据文件类型查找文件

![image-20200305203634022](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.assets/image-20200305203634022.png)

filetype包含了f、b、c、d、l、s等类型

## 7 Linux系统文件介绍

早期的Linux使用ext2格式，CentOS 5默认使用ext3，CentOS 6默认使用ext4，而目前最新的CentOS7默认使用xfs格式。ext2文件系统虽然高效、稳定，但随着Linux系统在关键业务中的应用，Linux文件系统的弱点也逐渐显露出来。因为ext2文件系统不是日志文件系统，这在关键行业是一个致命的弱点

ext3文件系统是直接从ext2文件系统发展而来的，它带有日志功能，可以跟踪记录文件系统的变化，并将变化内容写入日志。写操作首先是对日志记录文件进行操作，若整个写操作由于某种原因（如系统掉电）而中断，当系统重启时，会根据日志记录来恢复中断前的写操作，而且这个过程费时极短。

而ext4文件系统，较ext3文件系统又有很多好的特性，其中最明显的特征是ext4支持的最大文件系统容量和单个最大文件大小比ext3大了许多，二者之间的详细区别不再介绍。虽然ext4支持的单个文件大小已经达到了16TB，最大文件支持到40多亿

xfs支持的量级要比ext4大得多。CentOS 7默认采用xfs也是必然的，还有一个原因，xfs的开发者目前受雇于Red Hat公司，ext4的开发者受雇于Google公司。

Linux文件系统在Windows中是不能识别的，但在Linux系统中可以挂载Windows文件系统。Linux目前支持MS-DOS、VFAT、FAT、BSD等格式，如果你使用的是Red Hat或者CentOS，那么请不要妄图挂载NTFS格式的分区到Linux下，因为它不支持NTFS。当有这方面的需求时，我们可以通过安装ntfs-3g软件包来解决这个问题。

可以使用命令cat /etc/filesystems来查看你的系统所支持的文件系统类型。

![image-20200305204129970](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86.assets/image-20200305204129970.png)







