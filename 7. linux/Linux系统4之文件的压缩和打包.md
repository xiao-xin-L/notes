# Linux 系统的文件压缩与打包

在Windows下，我们接触最多的压缩文件是.rar格式的；但在Linux下，不能识别这种格式，它有自己独特的压缩工具。但.zip格式的文件在Windows和Linux下都能使用。使用压缩文件，不仅能节省磁盘空间，而且在传输时还能节省网络带宽。

Linux下最常见的压缩文件通常都是.tar.gz格式的，除此之外，还有.tar、.gz、.bz2、xz、.zip等格式。Linux下的文件后缀名可加可不加，但压缩文件最好加上后缀名。这是为了判断压缩文件是由哪种压缩工具所压缩的，而后才能正确地解压缩这个文件。

以下为常见的linux系统的压缩文件的种类与对应的压缩工具

 .gz：表示由gzip压缩工具压缩的文件。
 .bz2：表示由bzip2压缩工具压缩的文件。
 .tar：表示由tar打包程序打包的文件（tar并没有压缩功能，只是把一个目录合并成一个文件）。
 .tar.gz：可以理解为先由tar打包，然后再由gzip压缩。
 .tar.bz2：可以理解为先由tar打包，然后再由bzip2压缩。
 .tar.xz：可以理解成先由tar打包，然后再xz压缩。

## 1 gzip压缩工具

gzip命令的格式为gzip [-d#] filename，其中#为1~9的数字。

 -d：该参数在解压缩时使用。
 -#：表示压缩等级，1为最差，9为最好，6为默认。

![image-20200307164047047](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E7%9A%84%E5%8E%8B%E7%BC%A9%E5%92%8C%E6%89%93%E5%8C%85.assets/image-20200307164047047.png)

我们可以看到, 压缩文件的指令是把原有的文件给覆盖为压缩后的文件, 原始文件就不见了

![image-20200307164243379](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E7%9A%84%E5%8E%8B%E7%BC%A9%E5%92%8C%E6%89%93%E5%8C%85.assets/image-20200307164243379.png)

解压也是如此, 会把原来的压缩包文件给替换掉

gzip不支持压缩目录，压缩目录时会报错

![image-20200307164419134](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E7%9A%84%E5%8E%8B%E7%BC%A9%E5%92%8C%E6%89%93%E5%8C%85.assets/image-20200307164419134.png)

## 2 bzip2 压缩工具

bzip2命令的格式为bzip2 [-dz] filename，它只有-z（强制压缩）和-d（解压缩）两个常用选项。压缩级别有1~9，默认级别是9。压缩时，加或不加-z选项都可以压缩文件

![image-20200307164613763](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E7%9A%84%E5%8E%8B%E7%BC%A9%E5%92%8C%E6%89%93%E5%8C%85.assets/image-20200307164613763.png)

![image-20200307164633024](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E7%9A%84%E5%8E%8B%E7%BC%A9%E5%92%8C%E6%89%93%E5%8C%85.assets/image-20200307164633024.png)

bzip2命令也不可以压缩目录，压缩目录时会报错

![image-20200307164712498](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E7%9A%84%E5%8E%8B%E7%BC%A9%E5%92%8C%E6%89%93%E5%8C%85.assets/image-20200307164712498.png)

## 3 xz压缩工具

xz命令的格式为xz [-dz] filename，和bzip2类似. xz命令同样也不可以压缩目录，压缩目录时会报错

## 4 zip压缩工具

zip压缩包在Windows和Linux中都比较常用，它可以压缩目录和文件，压缩目录时，需要指定目录下的文件

![image-20200307213209867](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E7%9A%84%E5%8E%8B%E7%BC%A9%E5%92%8C%E6%89%93%E5%8C%85.assets/image-20200307213209867.png)



做完试验后就会发现，当目录下还有二级目录甚至更多级目录时，zip命令仅仅是把目录本身压缩而已。

![image-20200307213623539](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E7%9A%84%E5%8E%8B%E7%BC%A9%E5%92%8C%E6%89%93%E5%8C%85.assets/image-20200307213623539.png)

如果想要一并压缩二级目录下的文件, 必须加上-r选项

![image-20200307213852736](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E7%9A%84%E5%8E%8B%E7%BC%A9%E5%92%8C%E6%89%93%E5%8C%85.assets/image-20200307213852736.png)



## 5 打包工具 tar

打包与压缩不同, 打包是指把一个目录打包成一个文件, 这个文件可以再去通过压缩工具进行压缩

tar本身就是一个打包工具，可以把目录打包成一个文件，它把所有文件整合成一个大文件，方便复制或者移动。该命令的格式为 **tar [-zjxcvfpP] filename target** ，它有多个选项

 -z：表示同时用gzip压缩。
 -j：表示同时用bzip2压缩。
 -J：表示同时用xz压缩。
 -x：表示解包或者解压缩。
 -t：表示查看tar包里的文件。
 -c：表示建立一个tar包或者压缩文件包。
 -v：表示可视化。
 -f：后面跟文件名（即-f filename，表示压缩后的文件名为filename，或者解压文件filename。需要注意的是，如果是多个参数组合的情况下，请把-f参数写到最后面。
 -p：表示使用原文件的属性，压缩前什么属性压缩后还什么属性。（不常用）
 -P：表示可以使用绝对路径。（不常用）
 --exclude filename：表示在打包或压缩时，不要将filename文件包括在内。（不常用）



![image-20200307203236965](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E7%9A%84%E5%8E%8B%E7%BC%A9%E5%92%8C%E6%89%93%E5%8C%85.assets/image-20200307203236965.png)

<center> 这是压缩文件 </center>

![image-20200307203458356](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E7%9A%84%E5%8E%8B%E7%BC%A9%E5%92%8C%E6%89%93%E5%8C%85.assets/image-20200307203458356.png)

<center>这是解包</center>

![image-20200307212236373](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E7%9A%84%E5%8E%8B%E7%BC%A9%E5%92%8C%E6%89%93%E5%8C%85.assets/image-20200307212236373.png)

<center>这是直接把打包并压缩后的文件, 直接解压为文件夹</center>

tar命令不仅可以打包目录，也可以打包文件

![image-20200307212542685](Linux%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E7%9A%84%E5%8E%8B%E7%BC%A9%E5%92%8C%E6%89%93%E5%8C%85.assets/image-20200307212542685.png)

不管是打包还是解包，原来的文件是不会删除的，而且它会覆盖当前已经存在的文件或者目录